language: node_js

node_js:
  - "5.11"

#services:
#  - docker

script:
  npm run build

deploy:
  - provider: s3
    access_key_id: $AWS_S3_ACCESS_KEY
    secret_access_key: $AWS_S3_SECRET_KEY
    bucket: "mm-ng2-gui"
    skip_cleanup: true
    local_dir: dist
#    cache_control: "max-age=21600"

# after deploying into s3
#after_deploy:
#  - if [ "$TRAVIS_BRANCH" == "master" ]; then
#      docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
#      docker push USER/REPO;
#    fi

notifications:
    email:
        on_failure: always